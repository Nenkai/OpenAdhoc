module PROJECT::ROOT
{
    function setFadeActor(widget)
    {
        var actor = main::menu::MFadeActor(widget, 1.0);
        actor.repeat = true;
        actor.period = 0.25;
        widget.actor = actor;
    }
	
    setFadeActor(Pane::Yes::bgf);
    setFadeActor(Pane::No::bgf);

    function onInitialize(context)
    {
        main::sound.play("ok");

        var policy = main::network.getPolicy("usage");
        if (policy != nil)
            Policy::label.text = policy;
        else
            Policy::label.text = context.translate(ROOT, "GET_FAILED");
    }

    function onCancel(context)
    {
        main::sound.play("disable");
        return EVENTRESULT_FILTER;
    }
}

module PROJECT::ROOT::Pane::Yes
{
    function onActivate(context)
    {
        main::sound.play("ok");
        start_page(context, AnnounceRoot);
        return EVENTRESULT_FILTER;
    }
}

module PROJECT::ROOT::Pane::No
{
    function onActivate(context)
    {
        main::sound.play("ok");

        var res = openConfirmDialog(context, DIALOG_QUERY, context.translate(ConnectRoot, "QUIT"));
        if (res)
        {
            main::network.logout();
            restart(context);
        }
        return EVENTRESULT_FILTER;
    }
}