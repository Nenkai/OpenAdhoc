module PROJECT::ROOT
{
	function setListActivate(func)
	{
		Normal::Scroll::List::cbActivate = func;
	}
	
	function setListKeyPress(func)
	{
		Normal::Scroll::List::cbKeyPress = func;
	}
	
	function setListKeyRelease(func)
	{
		Normal::Scroll::List::cbKeyRelease = func;
	}
	
	function setListFocusEnter(func)
	{
		Normal::Scroll::List::cbFocusEnter = func;
	}

	function setListFocusLeave(func)
	{
		Normal::Scroll::List::cbFocusLeave = func;
	}
	
	function setListCancel(func)
	{
		Normal::Scroll::List::cbCancel = func;
	}
	
	function setExitActivate(func)
	{
		ROOT::Common::Command::Exit::cbActivate = func;
	}
	
	function setOptionActivate(func)
	{
		ROOT::Common::Command::Option::cbActivate = func;
	}

	function clearCallback()
	{
		Normal::Scroll::List::clearCallback();
		setExitActivate(nil);
		setOptionActivate(nil);
	}
}

module PROJECT::ROOT::Common::Folder::VBox
{
	function onActivate(context, event)
	{
		main::sound.play("ok");
	
		var w = event.widget;
		w["activateFunc"](context, w["index"]);
	
		return EVENTRESULT_FILTER;
	}

	function onFocusEnter(context, event)
	{
		PROJECT::folderFocusEnter(context, event);
		return EVENTRESULT_CONTINUE;
	}

	function onFocusLeave(context, event)
	{
		PROJECT::folderFocusLeave(context, event);
		return EVENTRESULT_CONTINUE;
	}
}

module PROJECT::ROOT::Common::Command::Exit
{
	static cbActivate = nil;
	
	function onActivate(context, event)
	{
		main::sound.play("cancel");
		print("onActivate exit");
	
		if (cbActivate != nil)
			cbActivate(context);
	
		return EVENTRESULT_STOP;
	}
}

module PROJECT::ROOT::Common::Command::Option
{
	static cbActivate = nil;

	function onActivate(context, event)
	{
		main::sound.play("ok");
		print("onActivate option");
	
		if (cbActivate != nil)
			cbActivate(context);
	
		return EVENTRESULT_STOP;
	}
}

module PROJECT::ROOT::Common::Command::DeleteMode
{
	function onActivate(context, event)
	{
		main::sound.play("ok");
		start_page(context, FileEraseRoot);
		return EVENTRESULT_STOP;
	}
}

module PROJECT::ROOT::Common::Command::VBox
{
	function onActivate(context, event)
	{
		main::sound.play("ok");
		print("onActivate command");
	
		var w = event.widget;
		w["activateFunc"](context);
	
		return EVENTRESULT_FILTER;
	}
}

module PROJECT::ROOT::Normal::Scroll::List
{
	static cbActivate = nil;
	static cbKeyPress = nil;
	static cbKeyRelease = nil;
	static cbFocusEnter = nil;
	static cbFocusLeave = nil;
	static cbCancel = nil;

	function clearCallback()
	{
		var cbActivate = nil;
		var cbKeyPress = nil;
		var cbKeyRelease = nil;
		var cbFocusEnter = nil;
		var cbFocusLeave = nil;
		var cbCancel = nil;
	}

	function onActivate(context, event)
	{
		if (cbActivate != nil)
			cbActivate(context);
	
		return true;
	}

	function onKeyPress(context, event, item)
	{
		if (cbKeyPress != nil)
			return cbKeyPress(context, event);
	
		return EVENTRESULT_CONTINUE;
	}

	function onKeyRelease(context, event)
	{
		if (cbKeyRelease != nil)
			return cbKeyRelease(context, event);
	
		return EVENTRESULT_CONTINUE;
	}

	function onFocusEnter(context, event)
	{
		if (cbFocusEnter != nil)
			return cbFocusEnter(context, event);
	
		return EVENTRESULT_CONTINUE;
	}

	function onFocusLeave(context, event)
	{
		if (cbFocusLeave != nil)
			return cbFocusLeave(context, event);
	
		return EVENTRESULT_CONTINUE;
	}

	function onCancel(context)
	{
		if (cbCancel != nil)
			return cbCancel(context);
	
		return EVENTRESULT_CONTINUE;
	}
}