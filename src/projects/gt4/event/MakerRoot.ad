module PROJECT::ROOT
{

	static selected_name = "daihatsu";
	static maker_list = [];
	
	maker_list.push("daihatsu");
	maker_list.push("honda");
	maker_list.push("mazda");
	maker_list.push("mitsubishi");
	maker_list.push("nissan");
	maker_list.push("subaru");
	maker_list.push("suzuki");
	maker_list.push("toyota");
	maker_list.push("vauxhall");

	function onInitialize(context)
	{
		var focused_item = nil;
		var num = maker_list.size;
	
		for (var i = 0; i < num; i++)
		{
			var maker = maker_list[i];
			var makeritem = StoreHouse::MakerItem.getDeepCopy();
			makeritem.name = maker;
	
			var path = "piece/manu_logo/" + maker + ".img";
			makeritem["bg"].image_path = path;
			makeritem["bga"].image_path = path;
	
			ScrollWindow::clip::space.appendChild(context, makeritem);
			makeritem.adjustSize();
	
			if (selected_name == maker)
				ROOT.setFocus(makeritem);
		}
	
		ScrollWindow::clip::space.arrangeColAuto(2, 4.0, 4.0);
		ScrollWindow.updateGeometry(context);
	}


	function onFinalize(context)
	{
		ScrollWindow::clip::space.clearChildren(context);
	}
	
	function getCurrentCategory()
	{
		return "honda";
	}
	
	function remember_focus()
	{
		var fwidget = ROOT.getFocusedWidget();
		if (fwidget != nil)
			selected_name = fwidget.name;
	}


	function onCancel(context, item)
	{
		main::sound.play("cancel");
		remember_focus();
	
		context.transition.panOutIn(context);
		context.transition.syncOut(context);
		context.startPage(MethodRoot);
	
		return EVENTRESULT_FILTER;
	}
	
	function onActivate(context, item)
	{
		main::sound.play("ok");
		remember_focus();
	
		context.transition.panOutIn(context);
		context.transition.syncOut(context);
		context.startPage(CarRoot);
	
		return EVENTRESULT_FILTER;
	}
}